resource_registry:
  OS::TripleO::Services::AgilioVrouter: ../../deployment/agilio/vrouter-forwarder.yaml
  OS::TripleO::Compute::NodeUserData: ../../firstboot/agilio/agilio_vrouter.yaml

parameter_defaults:
  ServiceNetMap:
    AgilioVrouterNetwork: internal_api

  # Provide correct registry and tag for agilio containers
  AgilioRegistry: '192.168.24.1:8787'
  AgilioVrouterImageTag: 'latest'
  AgilioForwarderImageTag: 'latest'

  # Add agilio registry into insecure list if registry different from underloud
  # DockerInsecureRegistryAddress: ''

  # If agilio registry requires creadentiols provide them in format like below
  # ContainerImageRegistryCredentials:
  #   '192.0.2.1:8787':
  #     username: password

  # Provide correct parameters
  # Note: if it is provided in another envifile then update that file
  # instead of setting it here to avoid overwritting
  ComputeParameters:
    # IOMMU
    KernelArgs: " intel_iommu=on iommu=pt isolcpus=1,2 default_hugepagesz=1GB hugepagesz=1G hugepages=4 hugepagesz=2M hugepages=1024 "
    ExtraSysctlSettings:
      # must be equal to value from 1G kernel args: hugepages=4
      vm.nr_hugepages:
        value: 4
      vm.max_map_count:
        value: 128960

    # Hugepages
    ContrailVrouterHugepages1G: "2"

    # Fabric interface
    # NOTE: the same name for physical interface is to be set in approvpriate
    # ..nic-config.yaml file (extraconfig/pre_network/contrail/compute_pre_network.yaml)
    # as the bind interface name for vhost0. Dont use nic2 like names.
    ContrailSettings:
      PHYSICAL_INTERFACE: nfp_p0
